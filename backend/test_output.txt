============================= test session starts ==============================
platform linux -- Python 3.12.12, pytest-9.0.2, pluggy-1.6.0
rootdir: /app/backend
plugins: asyncio-1.3.0, anyio-4.12.1
asyncio: mode=Mode.STRICT, debug=False, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collected 1 item

tests/test_contracts.py F                                                [100%]

=================================== FAILURES ===================================
______________________________ test_contract_flow ______________________________

setup_db = None

    @pytest.mark.asyncio
    async def test_contract_flow(setup_db):
        # Setup Data
        async with SessionLocal() as session:
            await initialize_galaxy(session, planet_count=10)

            # Create Unique Users
            suffix = random.randint(1000, 9999)
            issuer = User(discord_id=f"issuer_{suffix}", username="issuer")
            contractor = User(discord_id=f"contractor_{suffix}", username="contractor")
            session.add_all([issuer, contractor])
            await session.commit()
            await session.refresh(issuer)
            await session.refresh(contractor)

            # Create Wallets
            w1 = Wallet(user_id=issuer.id, balance=10000.0)
            w2 = Wallet(user_id=contractor.id, balance=5000.0)
            session.add_all([w1, w2])

            # Create Item
            item = Item(name=f"Test Cargo {suffix}", tier=1, volume=1.0)
            session.add(item)
            await session.commit()
            await session.refresh(item)

            # Get Planets
            planets_res = await session.execute(select(Planet).limit(2))
            planets = planets_res.scalars().all()
            origin = planets[0]
            destination = planets[1]

            # Create Inventory for Issuer at Origin
            inv = Inventory(planet_id=origin.id, item_id=item.id, quantity=100)
            session.add(inv)

            # Create Fleet for Contractor at Origin
>           fleet = Fleet(owner_id=contractor.id, name="Hauler 1", location_planet_id=origin.id, cargo_capacity=500.0)
                                   ^^^^^^^^^^^^^

tests/test_contracts.py:81:
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
/home/jules/.pyenv/versions/3.12.12/lib/python3.12/site-packages/sqlalchemy/orm/attributes.py:566: in __get__
    return self.impl.get(state, dict_)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
/home/jules/.pyenv/versions/3.12.12/lib/python3.12/site-packages/sqlalchemy/orm/attributes.py:1086: in get
    value = self._fire_loader_callables(state, key, passive)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/home/jules/.pyenv/versions/3.12.12/lib/python3.12/site-packages/sqlalchemy/orm/attributes.py:1116: in _fire_loader_callables
    return state._load_expired(state, passive)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/home/jules/.pyenv/versions/3.12.12/lib/python3.12/site-packages/sqlalchemy/orm/state.py:798: in _load_expired
    self.manager.expired_attribute_loader(self, toload, passive)
/home/jules/.pyenv/versions/3.12.12/lib/python3.12/site-packages/sqlalchemy/orm/loading.py:1651: in load_scalar_attributes
    result = load_on_ident(
/home/jules/.pyenv/versions/3.12.12/lib/python3.12/site-packages/sqlalchemy/orm/loading.py:507: in load_on_ident
    return load_on_pk_identity(
/home/jules/.pyenv/versions/3.12.12/lib/python3.12/site-packages/sqlalchemy/orm/loading.py:692: in load_on_pk_identity
    session.execute(
/home/jules/.pyenv/versions/3.12.12/lib/python3.12/site-packages/sqlalchemy/orm/session.py:2308: in execute
    return self._execute_internal(
/home/jules/.pyenv/versions/3.12.12/lib/python3.12/site-packages/sqlalchemy/orm/session.py:2190: in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
/home/jules/.pyenv/versions/3.12.12/lib/python3.12/site-packages/sqlalchemy/orm/context.py:293: in orm_execute_statement
    result = conn.execute(
/home/jules/.pyenv/versions/3.12.12/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1416: in execute
    return meth(
/home/jules/.pyenv/versions/3.12.12/lib/python3.12/site-packages/sqlalchemy/sql/elements.py:517: in _execute_on_connection
    return connection._execute_clauseelement(
/home/jules/.pyenv/versions/3.12.12/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1639: in _execute_clauseelement
    ret = self._execute_context(
/home/jules/.pyenv/versions/3.12.12/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1848: in _execute_context
    return self._exec_single_context(
/home/jules/.pyenv/versions/3.12.12/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1988: in _exec_single_context
    self._handle_dbapi_exception(
/home/jules/.pyenv/versions/3.12.12/lib/python3.12/site-packages/sqlalchemy/engine/base.py:2347: in _handle_dbapi_exception
    raise exc_info[1].with_traceback(exc_info[2])
/home/jules/.pyenv/versions/3.12.12/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1969: in _exec_single_context
    self.dialect.do_execute(
/home/jules/.pyenv/versions/3.12.12/lib/python3.12/site-packages/sqlalchemy/engine/default.py:922: in do_execute
    cursor.execute(statement, parameters)
/home/jules/.pyenv/versions/3.12.12/lib/python3.12/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:146: in execute
    self._adapt_connection._handle_exception(error)
/home/jules/.pyenv/versions/3.12.12/lib/python3.12/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:298: in _handle_exception
    raise error
/home/jules/.pyenv/versions/3.12.12/lib/python3.12/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py:123: in execute
    _cursor = self.await_(self._connection.cursor())
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

awaitable = <aiosqlite.context.Result object at 0x7f825e94ff90>

    def await_only(awaitable: Awaitable[_T]) -> _T:
        """Awaits an async function in a sync method.

        The sync method must be inside a :func:`greenlet_spawn` context.
        :func:`await_only` calls cannot be nested.

        :param awaitable: The coroutine to call.

        """
        # this is called in the context greenlet while running fn
        current = getcurrent()
        if not isinstance(current, _AsyncIoGreenlet):
            _safe_cancel_awaitable(awaitable)

>           raise exc.MissingGreenlet(
                "greenlet_spawn has not been called; can't call await_only() "
                "here. Was IO attempted in an unexpected place?"
            )
E           sqlalchemy.exc.MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)

/home/jules/.pyenv/versions/3.12.12/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py:121: MissingGreenlet
---------------------------- Captured stdout setup -----------------------------
2026-02-05 09:12:34,401 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-05 09:12:34,402 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("users")
2026-02-05 09:12:34,402 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-05 09:12:34,406 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("users")
2026-02-05 09:12:34,406 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-05 09:12:34,409 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("planets")
2026-02-05 09:12:34,409 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-05 09:12:34,411 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("planets")
2026-02-05 09:12:34,411 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-05 09:12:34,414 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("items")
2026-02-05 09:12:34,414 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-05 09:12:34,416 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("items")
2026-02-05 09:12:34,416 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-05 09:12:34,418 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("inventories")
2026-02-05 09:12:34,418 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-05 09:12:34,421 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("inventories")
2026-02-05 09:12:34,421 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-05 09:12:34,423 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("wallets")
2026-02-05 09:12:34,424 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-05 09:12:34,426 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("wallets")
2026-02-05 09:12:34,426 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-05 09:12:34,429 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("buildings")
2026-02-05 09:12:34,429 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-05 09:12:34,432 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("buildings")
2026-02-05 09:12:34,432 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-05 09:12:34,434 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("fleets")
2026-02-05 09:12:34,434 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-05 09:12:34,436 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("fleets")
2026-02-05 09:12:34,436 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-05 09:12:34,438 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("contracts")
2026-02-05 09:12:34,438 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-05 09:12:34,440 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("contracts")
2026-02-05 09:12:34,441 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-05 09:12:34,445 INFO sqlalchemy.engine.Engine
CREATE TABLE users (
	id INTEGER NOT NULL,
	discord_id VARCHAR(50) NOT NULL,
	username VARCHAR(100),
	avatar_url VARCHAR(255),
	created_at DATETIME DEFAULT (CURRENT_TIMESTAMP),
	updated_at DATETIME,
	PRIMARY KEY (id)
)


2026-02-05 09:12:34,445 INFO sqlalchemy.engine.Engine [no key 0.00031s] ()
2026-02-05 09:12:34,452 INFO sqlalchemy.engine.Engine CREATE INDEX ix_users_id ON users (id)
2026-02-05 09:12:34,453 INFO sqlalchemy.engine.Engine [no key 0.00014s] ()
2026-02-05 09:12:34,459 INFO sqlalchemy.engine.Engine CREATE UNIQUE INDEX ix_users_discord_id ON users (discord_id)
2026-02-05 09:12:34,459 INFO sqlalchemy.engine.Engine [no key 0.00044s] ()
2026-02-05 09:12:34,466 INFO sqlalchemy.engine.Engine
CREATE TABLE items (
	id INTEGER NOT NULL,
	name VARCHAR(100) NOT NULL,
	description VARCHAR(255),
	tier INTEGER NOT NULL,
	volume FLOAT NOT NULL,
	PRIMARY KEY (id)
)


2026-02-05 09:12:34,466 INFO sqlalchemy.engine.Engine [no key 0.00044s] ()
2026-02-05 09:12:34,472 INFO sqlalchemy.engine.Engine CREATE INDEX ix_items_id ON items (id)
2026-02-05 09:12:34,472 INFO sqlalchemy.engine.Engine [no key 0.00038s] ()
2026-02-05 09:12:34,477 INFO sqlalchemy.engine.Engine CREATE UNIQUE INDEX ix_items_name ON items (name)
2026-02-05 09:12:34,477 INFO sqlalchemy.engine.Engine [no key 0.00033s] ()
2026-02-05 09:12:34,484 INFO sqlalchemy.engine.Engine
CREATE TABLE planets (
	id INTEGER NOT NULL,
	name VARCHAR(100) NOT NULL,
	x FLOAT NOT NULL,
	y FLOAT NOT NULL,
	slots INTEGER NOT NULL,
	temperature FLOAT NOT NULL,
	gravity FLOAT NOT NULL,
	owner_id INTEGER,
	created_at DATETIME DEFAULT (CURRENT_TIMESTAMP),
	updated_at DATETIME,
	PRIMARY KEY (id),
	FOREIGN KEY(owner_id) REFERENCES users (id)
)


2026-02-05 09:12:34,484 INFO sqlalchemy.engine.Engine [no key 0.00035s] ()
2026-02-05 09:12:34,489 INFO sqlalchemy.engine.Engine CREATE INDEX ix_planets_name ON planets (name)
2026-02-05 09:12:34,489 INFO sqlalchemy.engine.Engine [no key 0.00029s] ()
2026-02-05 09:12:34,494 INFO sqlalchemy.engine.Engine CREATE INDEX ix_planets_id ON planets (id)
2026-02-05 09:12:34,494 INFO sqlalchemy.engine.Engine [no key 0.00029s] ()
2026-02-05 09:12:34,500 INFO sqlalchemy.engine.Engine
CREATE TABLE wallets (
	id INTEGER NOT NULL,
	user_id INTEGER NOT NULL,
	balance FLOAT NOT NULL,
	updated_at DATETIME,
	PRIMARY KEY (id),
	UNIQUE (user_id),
	FOREIGN KEY(user_id) REFERENCES users (id)
)


2026-02-05 09:12:34,500 INFO sqlalchemy.engine.Engine [no key 0.00022s] ()
2026-02-05 09:12:34,506 INFO sqlalchemy.engine.Engine CREATE INDEX ix_wallets_id ON wallets (id)
2026-02-05 09:12:34,506 INFO sqlalchemy.engine.Engine [no key 0.00033s] ()
2026-02-05 09:12:34,512 INFO sqlalchemy.engine.Engine
CREATE TABLE buildings (
	id INTEGER NOT NULL,
	planet_id INTEGER NOT NULL,
	type VARCHAR(50) NOT NULL,
	status VARCHAR(20) NOT NULL,
	created_at DATETIME DEFAULT (CURRENT_TIMESTAMP),
	finished_at DATETIME,
	PRIMARY KEY (id),
	FOREIGN KEY(planet_id) REFERENCES planets (id)
)


2026-02-05 09:12:34,512 INFO sqlalchemy.engine.Engine [no key 0.00039s] ()
2026-02-05 09:12:34,517 INFO sqlalchemy.engine.Engine CREATE INDEX ix_buildings_id ON buildings (id)
2026-02-05 09:12:34,517 INFO sqlalchemy.engine.Engine [no key 0.00024s] ()
2026-02-05 09:12:34,523 INFO sqlalchemy.engine.Engine
CREATE TABLE fleets (
	id INTEGER NOT NULL,
	owner_id INTEGER NOT NULL,
	name VARCHAR(100) NOT NULL,
	location_planet_id INTEGER,
	destination_planet_id INTEGER,
	arrival_time DATETIME,
	status VARCHAR(20) NOT NULL,
	cargo_capacity FLOAT NOT NULL,
	created_at DATETIME DEFAULT (CURRENT_TIMESTAMP),
	updated_at DATETIME,
	PRIMARY KEY (id),
	FOREIGN KEY(owner_id) REFERENCES users (id),
	FOREIGN KEY(location_planet_id) REFERENCES planets (id),
	FOREIGN KEY(destination_planet_id) REFERENCES planets (id)
)


2026-02-05 09:12:34,523 INFO sqlalchemy.engine.Engine [no key 0.00025s] ()
2026-02-05 09:12:34,529 INFO sqlalchemy.engine.Engine CREATE INDEX ix_fleets_id ON fleets (id)
2026-02-05 09:12:34,529 INFO sqlalchemy.engine.Engine [no key 0.00036s] ()
2026-02-05 09:12:34,535 INFO sqlalchemy.engine.Engine
CREATE TABLE contracts (
	id INTEGER NOT NULL,
	issuer_id INTEGER NOT NULL,
	contractor_id INTEGER,
	origin_planet_id INTEGER NOT NULL,
	destination_planet_id INTEGER NOT NULL,
	item_id INTEGER NOT NULL,
	quantity INTEGER NOT NULL,
	reward_amount FLOAT NOT NULL,
	collateral_amount FLOAT NOT NULL,
	duration_seconds INTEGER NOT NULL,
	created_at DATETIME DEFAULT (CURRENT_TIMESTAMP),
	accepted_at DATETIME,
	deadline DATETIME,
	status VARCHAR(20) NOT NULL,
	PRIMARY KEY (id),
	FOREIGN KEY(issuer_id) REFERENCES users (id),
	FOREIGN KEY(contractor_id) REFERENCES users (id),
	FOREIGN KEY(origin_planet_id) REFERENCES planets (id),
	FOREIGN KEY(destination_planet_id) REFERENCES planets (id),
	FOREIGN KEY(item_id) REFERENCES items (id)
)


2026-02-05 09:12:34,535 INFO sqlalchemy.engine.Engine [no key 0.00057s] ()
2026-02-05 09:12:34,541 INFO sqlalchemy.engine.Engine CREATE INDEX ix_contracts_id ON contracts (id)
2026-02-05 09:12:34,541 INFO sqlalchemy.engine.Engine [no key 0.00026s] ()
2026-02-05 09:12:34,547 INFO sqlalchemy.engine.Engine
CREATE TABLE inventories (
	id INTEGER NOT NULL,
	planet_id INTEGER,
	fleet_id INTEGER,
	item_id INTEGER NOT NULL,
	quantity INTEGER NOT NULL,
	PRIMARY KEY (id),
	FOREIGN KEY(planet_id) REFERENCES planets (id),
	FOREIGN KEY(fleet_id) REFERENCES fleets (id),
	FOREIGN KEY(item_id) REFERENCES items (id)
)


2026-02-05 09:12:34,547 INFO sqlalchemy.engine.Engine [no key 0.00024s] ()
2026-02-05 09:12:34,553 INFO sqlalchemy.engine.Engine CREATE INDEX ix_inventories_id ON inventories (id)
2026-02-05 09:12:34,553 INFO sqlalchemy.engine.Engine [no key 0.00020s] ()
2026-02-05 09:12:34,557 INFO sqlalchemy.engine.Engine COMMIT
------------------------------ Captured log setup ------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2690 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1848 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1848 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1848 PRAGMA temp.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1848 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1848 PRAGMA main.table_info("planets")
INFO     sqlalchemy.engine.Engine:base.py:1848 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1848 PRAGMA temp.table_info("planets")
INFO     sqlalchemy.engine.Engine:base.py:1848 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1848 PRAGMA main.table_info("items")
INFO     sqlalchemy.engine.Engine:base.py:1848 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1848 PRAGMA temp.table_info("items")
INFO     sqlalchemy.engine.Engine:base.py:1848 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1848 PRAGMA main.table_info("inventories")
INFO     sqlalchemy.engine.Engine:base.py:1848 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1848 PRAGMA temp.table_info("inventories")
INFO     sqlalchemy.engine.Engine:base.py:1848 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1848 PRAGMA main.table_info("wallets")
INFO     sqlalchemy.engine.Engine:base.py:1848 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1848 PRAGMA temp.table_info("wallets")
INFO     sqlalchemy.engine.Engine:base.py:1848 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1848 PRAGMA main.table_info("buildings")
INFO     sqlalchemy.engine.Engine:base.py:1848 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1848 PRAGMA temp.table_info("buildings")
INFO     sqlalchemy.engine.Engine:base.py:1848 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1848 PRAGMA main.table_info("fleets")
INFO     sqlalchemy.engine.Engine:base.py:1848 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1848 PRAGMA temp.table_info("fleets")
INFO     sqlalchemy.engine.Engine:base.py:1848 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1848 PRAGMA main.table_info("contracts")
INFO     sqlalchemy.engine.Engine:base.py:1848 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1848 PRAGMA temp.table_info("contracts")
INFO     sqlalchemy.engine.Engine:base.py:1848 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1848
CREATE TABLE users (
	id INTEGER NOT NULL,
	discord_id VARCHAR(50) NOT NULL,
	username VARCHAR(100),
	avatar_url VARCHAR(255),
	created_at DATETIME DEFAULT (CURRENT_TIMESTAMP),
	updated_at DATETIME,
	PRIMARY KEY (id)
)


INFO     sqlalchemy.engine.Engine:base.py:1848 [no key 0.00031s] ()
INFO     sqlalchemy.engine.Engine:base.py:1848 CREATE INDEX ix_users_id ON users (id)
INFO     sqlalchemy.engine.Engine:base.py:1848 [no key 0.00014s] ()
INFO     sqlalchemy.engine.Engine:base.py:1848 CREATE UNIQUE INDEX ix_users_discord_id ON users (discord_id)
INFO     sqlalchemy.engine.Engine:base.py:1848 [no key 0.00044s] ()
INFO     sqlalchemy.engine.Engine:base.py:1848
CREATE TABLE items (
	id INTEGER NOT NULL,
	name VARCHAR(100) NOT NULL,
	description VARCHAR(255),
	tier INTEGER NOT NULL,
	volume FLOAT NOT NULL,
	PRIMARY KEY (id)
)


INFO     sqlalchemy.engine.Engine:base.py:1848 [no key 0.00044s] ()
INFO     sqlalchemy.engine.Engine:base.py:1848 CREATE INDEX ix_items_id ON items (id)
INFO     sqlalchemy.engine.Engine:base.py:1848 [no key 0.00038s] ()
INFO     sqlalchemy.engine.Engine:base.py:1848 CREATE UNIQUE INDEX ix_items_name ON items (name)
INFO     sqlalchemy.engine.Engine:base.py:1848 [no key 0.00033s] ()
INFO     sqlalchemy.engine.Engine:base.py:1848
CREATE TABLE planets (
	id INTEGER NOT NULL,
	name VARCHAR(100) NOT NULL,
	x FLOAT NOT NULL,
	y FLOAT NOT NULL,
	slots INTEGER NOT NULL,
	temperature FLOAT NOT NULL,
	gravity FLOAT NOT NULL,
	owner_id INTEGER,
	created_at DATETIME DEFAULT (CURRENT_TIMESTAMP),
	updated_at DATETIME,
	PRIMARY KEY (id),
	FOREIGN KEY(owner_id) REFERENCES users (id)
)


INFO     sqlalchemy.engine.Engine:base.py:1848 [no key 0.00035s] ()
INFO     sqlalchemy.engine.Engine:base.py:1848 CREATE INDEX ix_planets_name ON planets (name)
INFO     sqlalchemy.engine.Engine:base.py:1848 [no key 0.00029s] ()
INFO     sqlalchemy.engine.Engine:base.py:1848 CREATE INDEX ix_planets_id ON planets (id)
INFO     sqlalchemy.engine.Engine:base.py:1848 [no key 0.00029s] ()
INFO     sqlalchemy.engine.Engine:base.py:1848
CREATE TABLE wallets (
	id INTEGER NOT NULL,
	user_id INTEGER NOT NULL,
	balance FLOAT NOT NULL,
	updated_at DATETIME,
	PRIMARY KEY (id),
	UNIQUE (user_id),
	FOREIGN KEY(user_id) REFERENCES users (id)
)


INFO     sqlalchemy.engine.Engine:base.py:1848 [no key 0.00022s] ()
INFO     sqlalchemy.engine.Engine:base.py:1848 CREATE INDEX ix_wallets_id ON wallets (id)
INFO     sqlalchemy.engine.Engine:base.py:1848 [no key 0.00033s] ()
INFO     sqlalchemy.engine.Engine:base.py:1848
CREATE TABLE buildings (
	id INTEGER NOT NULL,
	planet_id INTEGER NOT NULL,
	type VARCHAR(50) NOT NULL,
	status VARCHAR(20) NOT NULL,
	created_at DATETIME DEFAULT (CURRENT_TIMESTAMP),
	finished_at DATETIME,
	PRIMARY KEY (id),
	FOREIGN KEY(planet_id) REFERENCES planets (id)
)


INFO     sqlalchemy.engine.Engine:base.py:1848 [no key 0.00039s] ()
INFO     sqlalchemy.engine.Engine:base.py:1848 CREATE INDEX ix_buildings_id ON buildings (id)
INFO     sqlalchemy.engine.Engine:base.py:1848 [no key 0.00024s] ()
INFO     sqlalchemy.engine.Engine:base.py:1848
CREATE TABLE fleets (
	id INTEGER NOT NULL,
	owner_id INTEGER NOT NULL,
	name VARCHAR(100) NOT NULL,
	location_planet_id INTEGER,
	destination_planet_id INTEGER,
	arrival_time DATETIME,
	status VARCHAR(20) NOT NULL,
	cargo_capacity FLOAT NOT NULL,
	created_at DATETIME DEFAULT (CURRENT_TIMESTAMP),
	updated_at DATETIME,
	PRIMARY KEY (id),
	FOREIGN KEY(owner_id) REFERENCES users (id),
	FOREIGN KEY(location_planet_id) REFERENCES planets (id),
	FOREIGN KEY(destination_planet_id) REFERENCES planets (id)
)


INFO     sqlalchemy.engine.Engine:base.py:1848 [no key 0.00025s] ()
INFO     sqlalchemy.engine.Engine:base.py:1848 CREATE INDEX ix_fleets_id ON fleets (id)
INFO     sqlalchemy.engine.Engine:base.py:1848 [no key 0.00036s] ()
INFO     sqlalchemy.engine.Engine:base.py:1848
CREATE TABLE contracts (
	id INTEGER NOT NULL,
	issuer_id INTEGER NOT NULL,
	contractor_id INTEGER,
	origin_planet_id INTEGER NOT NULL,
	destination_planet_id INTEGER NOT NULL,
	item_id INTEGER NOT NULL,
	quantity INTEGER NOT NULL,
	reward_amount FLOAT NOT NULL,
	collateral_amount FLOAT NOT NULL,
	duration_seconds INTEGER NOT NULL,
	created_at DATETIME DEFAULT (CURRENT_TIMESTAMP),
	accepted_at DATETIME,
	deadline DATETIME,
	status VARCHAR(20) NOT NULL,
	PRIMARY KEY (id),
	FOREIGN KEY(issuer_id) REFERENCES users (id),
	FOREIGN KEY(contractor_id) REFERENCES users (id),
	FOREIGN KEY(origin_planet_id) REFERENCES planets (id),
	FOREIGN KEY(destination_planet_id) REFERENCES planets (id),
	FOREIGN KEY(item_id) REFERENCES items (id)
)


INFO     sqlalchemy.engine.Engine:base.py:1848 [no key 0.00057s] ()
INFO     sqlalchemy.engine.Engine:base.py:1848 CREATE INDEX ix_contracts_id ON contracts (id)
INFO     sqlalchemy.engine.Engine:base.py:1848 [no key 0.00026s] ()
INFO     sqlalchemy.engine.Engine:base.py:1848
CREATE TABLE inventories (
	id INTEGER NOT NULL,
	planet_id INTEGER,
	fleet_id INTEGER,
	item_id INTEGER NOT NULL,
	quantity INTEGER NOT NULL,
	PRIMARY KEY (id),
	FOREIGN KEY(planet_id) REFERENCES planets (id),
	FOREIGN KEY(fleet_id) REFERENCES fleets (id),
	FOREIGN KEY(item_id) REFERENCES items (id)
)


INFO     sqlalchemy.engine.Engine:base.py:1848 [no key 0.00024s] ()
INFO     sqlalchemy.engine.Engine:base.py:1848 CREATE INDEX ix_inventories_id ON inventories (id)
INFO     sqlalchemy.engine.Engine:base.py:1848 [no key 0.00020s] ()
INFO     sqlalchemy.engine.Engine:base.py:2696 COMMIT
----------------------------- Captured stdout call -----------------------------
2026-02-05 09:12:34,566 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-05 09:12:34,636 INFO sqlalchemy.engine.Engine SELECT count(planets.id) AS count_1
FROM planets
2026-02-05 09:12:34,636 INFO sqlalchemy.engine.Engine [generated in 0.00057s] ()
2026-02-05 09:12:34,646 INFO sqlalchemy.engine.Engine INSERT INTO planets (name, x, y, slots, temperature, gravity, owner_id, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING id, created_at
2026-02-05 09:12:34,647 INFO sqlalchemy.engine.Engine [generated in 0.00059s (insertmanyvalues) 1/10 (ordered; batch not supported)] ('Mu-555', -689.73, -334.23, 9, 1.7, 0.84, None, None)
2026-02-05 09:12:34,649 INFO sqlalchemy.engine.Engine INSERT INTO planets (name, x, y, slots, temperature, gravity, owner_id, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING id, created_at
2026-02-05 09:12:34,649 INFO sqlalchemy.engine.Engine [insertmanyvalues 2/10 (ordered; batch not supported)] ('Upsilon IV', -416.18, -543.3, 8, 15.7, 0.74, None, None)
2026-02-05 09:12:34,651 INFO sqlalchemy.engine.Engine INSERT INTO planets (name, x, y, slots, temperature, gravity, owner_id, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING id, created_at
2026-02-05 09:12:34,651 INFO sqlalchemy.engine.Engine [insertmanyvalues 3/10 (ordered; batch not supported)] ('Alpha III', -541.86, 696.12, 12, 118.3, 1.77, None, None)
2026-02-05 09:12:34,652 INFO sqlalchemy.engine.Engine INSERT INTO planets (name, x, y, slots, temperature, gravity, owner_id, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING id, created_at
2026-02-05 09:12:34,652 INFO sqlalchemy.engine.Engine [insertmanyvalues 4/10 (ordered; batch not supported)] ('Vega-579', 78.45, 342.39, 3, -73.9, 1.45, None, None)
2026-02-05 09:12:34,654 INFO sqlalchemy.engine.Engine INSERT INTO planets (name, x, y, slots, temperature, gravity, owner_id, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING id, created_at
2026-02-05 09:12:34,654 INFO sqlalchemy.engine.Engine [insertmanyvalues 5/10 (ordered; batch not supported)] ('Nu VIII', -715.86, -324.66, 5, -87.5, 1.99, None, None)
2026-02-05 09:12:34,655 INFO sqlalchemy.engine.Engine INSERT INTO planets (name, x, y, slots, temperature, gravity, owner_id, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING id, created_at
2026-02-05 09:12:34,655 INFO sqlalchemy.engine.Engine [insertmanyvalues 6/10 (ordered; batch not supported)] ('Proxima-812', -575.3, 679.2, 11, 96.7, 0.69, None, None)
2026-02-05 09:12:34,657 INFO sqlalchemy.engine.Engine INSERT INTO planets (name, x, y, slots, temperature, gravity, owner_id, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING id, created_at
2026-02-05 09:12:34,657 INFO sqlalchemy.engine.Engine [insertmanyvalues 7/10 (ordered; batch not supported)] ('Upsilon Major', 930.1, 710.61, 10, -81.5, 1.2, None, None)
2026-02-05 09:12:34,658 INFO sqlalchemy.engine.Engine INSERT INTO planets (name, x, y, slots, temperature, gravity, owner_id, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING id, created_at
2026-02-05 09:12:34,659 INFO sqlalchemy.engine.Engine [insertmanyvalues 8/10 (ordered; batch not supported)] ('Beta-870', -543.79, 787.86, 8, -21.0, 1.67, None, None)
2026-02-05 09:12:34,660 INFO sqlalchemy.engine.Engine INSERT INTO planets (name, x, y, slots, temperature, gravity, owner_id, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING id, created_at
2026-02-05 09:12:34,660 INFO sqlalchemy.engine.Engine [insertmanyvalues 9/10 (ordered; batch not supported)] ('Lambda C', -181.86, 173.2, 8, -61.2, 2.11, None, None)
2026-02-05 09:12:34,662 INFO sqlalchemy.engine.Engine INSERT INTO planets (name, x, y, slots, temperature, gravity, owner_id, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING id, created_at
2026-02-05 09:12:34,662 INFO sqlalchemy.engine.Engine [insertmanyvalues 10/10 (ordered; batch not supported)] ('Kepler VII', 732.18, 340.68, 9, 109.4, 0.61, None, None)
2026-02-05 09:12:34,665 INFO sqlalchemy.engine.Engine COMMIT
2026-02-05 09:12:34,673 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-05 09:12:34,675 INFO sqlalchemy.engine.Engine INSERT INTO users (discord_id, username, avatar_url, updated_at) VALUES (?, ?, ?, ?) RETURNING id, created_at
2026-02-05 09:12:34,675 INFO sqlalchemy.engine.Engine [generated in 0.00043s (insertmanyvalues) 1/2 (ordered; batch not supported)] ('issuer_5694', 'issuer', None, None)
2026-02-05 09:12:34,678 INFO sqlalchemy.engine.Engine INSERT INTO users (discord_id, username, avatar_url, updated_at) VALUES (?, ?, ?, ?) RETURNING id, created_at
2026-02-05 09:12:34,678 INFO sqlalchemy.engine.Engine [insertmanyvalues 2/2 (ordered; batch not supported)] ('contractor_5694', 'contractor', None, None)
2026-02-05 09:12:34,681 INFO sqlalchemy.engine.Engine COMMIT
2026-02-05 09:12:34,688 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-05 09:12:34,692 INFO sqlalchemy.engine.Engine SELECT users.id, users.discord_id, users.username, users.avatar_url, users.created_at, users.updated_at
FROM users
WHERE users.id = ?
2026-02-05 09:12:34,693 INFO sqlalchemy.engine.Engine [generated in 0.00028s] (1,)
2026-02-05 09:12:34,696 INFO sqlalchemy.engine.Engine SELECT users.id, users.discord_id, users.username, users.avatar_url, users.created_at, users.updated_at
FROM users
WHERE users.id = ?
2026-02-05 09:12:34,696 INFO sqlalchemy.engine.Engine [cached since 0.004016s ago] (2,)
2026-02-05 09:12:34,704 INFO sqlalchemy.engine.Engine INSERT INTO items (name, description, tier, volume) VALUES (?, ?, ?, ?)
2026-02-05 09:12:34,704 INFO sqlalchemy.engine.Engine [generated in 0.00037s] ('Test Cargo 5694', None, 1, 1.0)
2026-02-05 09:12:34,707 INFO sqlalchemy.engine.Engine INSERT INTO wallets (user_id, balance, updated_at) VALUES (?, ?, ?) RETURNING id
2026-02-05 09:12:34,708 INFO sqlalchemy.engine.Engine [generated in 0.00031s (insertmanyvalues) 1/2 (ordered; batch not supported)] (1, 10000.0, None)
2026-02-05 09:12:34,709 INFO sqlalchemy.engine.Engine INSERT INTO wallets (user_id, balance, updated_at) VALUES (?, ?, ?) RETURNING id
2026-02-05 09:12:34,710 INFO sqlalchemy.engine.Engine [insertmanyvalues 2/2 (ordered; batch not supported)] (2, 5000.0, None)
2026-02-05 09:12:34,711 INFO sqlalchemy.engine.Engine COMMIT
2026-02-05 09:12:34,720 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-05 09:12:34,722 INFO sqlalchemy.engine.Engine SELECT items.id, items.name, items.description, items.tier, items.volume
FROM items
WHERE items.id = ?
2026-02-05 09:12:34,722 INFO sqlalchemy.engine.Engine [generated in 0.00046s] (1,)
2026-02-05 09:12:34,727 INFO sqlalchemy.engine.Engine SELECT planets.id, planets.name, planets.x, planets.y, planets.slots, planets.temperature, planets.gravity, planets.owner_id, planets.created_at, planets.updated_at
FROM planets
 LIMIT ? OFFSET ?
2026-02-05 09:12:34,727 INFO sqlalchemy.engine.Engine [generated in 0.00046s] (2, 0)
2026-02-05 09:12:34,732 INFO sqlalchemy.engine.Engine SELECT users.id AS users_id, users.discord_id AS users_discord_id, users.username AS users_username, users.avatar_url AS users_avatar_url, users.created_at AS users_created_at, users.updated_at AS users_updated_at
FROM users
WHERE users.id = ?
2026-02-05 09:12:34,732 INFO sqlalchemy.engine.Engine [generated in 0.00037s] (2,)
2026-02-05 09:12:34,733 INFO sqlalchemy.engine.Engine ROLLBACK
------------------------------ Captured log call -------------------------------
INFO     sqlalchemy.engine.Engine:base.py:2690 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1848 SELECT count(planets.id) AS count_1
FROM planets
INFO     sqlalchemy.engine.Engine:base.py:1848 [generated in 0.00057s] ()
INFO     sqlalchemy.engine.Engine:base.py:1843 INSERT INTO planets (name, x, y, slots, temperature, gravity, owner_id, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING id, created_at
INFO     sqlalchemy.engine.Engine:base.py:1843 [generated in 0.00059s (insertmanyvalues) 1/10 (ordered; batch not supported)] ('Mu-555', -689.73, -334.23, 9, 1.7, 0.84, None, None)
INFO     sqlalchemy.engine.Engine:base.py:1843 INSERT INTO planets (name, x, y, slots, temperature, gravity, owner_id, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING id, created_at
INFO     sqlalchemy.engine.Engine:base.py:1843 [insertmanyvalues 2/10 (ordered; batch not supported)] ('Upsilon IV', -416.18, -543.3, 8, 15.7, 0.74, None, None)
INFO     sqlalchemy.engine.Engine:base.py:1843 INSERT INTO planets (name, x, y, slots, temperature, gravity, owner_id, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING id, created_at
INFO     sqlalchemy.engine.Engine:base.py:1843 [insertmanyvalues 3/10 (ordered; batch not supported)] ('Alpha III', -541.86, 696.12, 12, 118.3, 1.77, None, None)
INFO     sqlalchemy.engine.Engine:base.py:1843 INSERT INTO planets (name, x, y, slots, temperature, gravity, owner_id, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING id, created_at
INFO     sqlalchemy.engine.Engine:base.py:1843 [insertmanyvalues 4/10 (ordered; batch not supported)] ('Vega-579', 78.45, 342.39, 3, -73.9, 1.45, None, None)
INFO     sqlalchemy.engine.Engine:base.py:1843 INSERT INTO planets (name, x, y, slots, temperature, gravity, owner_id, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING id, created_at
INFO     sqlalchemy.engine.Engine:base.py:1843 [insertmanyvalues 5/10 (ordered; batch not supported)] ('Nu VIII', -715.86, -324.66, 5, -87.5, 1.99, None, None)
INFO     sqlalchemy.engine.Engine:base.py:1843 INSERT INTO planets (name, x, y, slots, temperature, gravity, owner_id, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING id, created_at
INFO     sqlalchemy.engine.Engine:base.py:1843 [insertmanyvalues 6/10 (ordered; batch not supported)] ('Proxima-812', -575.3, 679.2, 11, 96.7, 0.69, None, None)
INFO     sqlalchemy.engine.Engine:base.py:1843 INSERT INTO planets (name, x, y, slots, temperature, gravity, owner_id, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING id, created_at
INFO     sqlalchemy.engine.Engine:base.py:1843 [insertmanyvalues 7/10 (ordered; batch not supported)] ('Upsilon Major', 930.1, 710.61, 10, -81.5, 1.2, None, None)
INFO     sqlalchemy.engine.Engine:base.py:1843 INSERT INTO planets (name, x, y, slots, temperature, gravity, owner_id, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING id, created_at
INFO     sqlalchemy.engine.Engine:base.py:1843 [insertmanyvalues 8/10 (ordered; batch not supported)] ('Beta-870', -543.79, 787.86, 8, -21.0, 1.67, None, None)
INFO     sqlalchemy.engine.Engine:base.py:1843 INSERT INTO planets (name, x, y, slots, temperature, gravity, owner_id, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING id, created_at
INFO     sqlalchemy.engine.Engine:base.py:1843 [insertmanyvalues 9/10 (ordered; batch not supported)] ('Lambda C', -181.86, 173.2, 8, -61.2, 2.11, None, None)
INFO     sqlalchemy.engine.Engine:base.py:1843 INSERT INTO planets (name, x, y, slots, temperature, gravity, owner_id, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING id, created_at
INFO     sqlalchemy.engine.Engine:base.py:1843 [insertmanyvalues 10/10 (ordered; batch not supported)] ('Kepler VII', 732.18, 340.68, 9, 109.4, 0.61, None, None)
INFO     sqlalchemy.engine.Engine:base.py:2696 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2690 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1843 INSERT INTO users (discord_id, username, avatar_url, updated_at) VALUES (?, ?, ?, ?) RETURNING id, created_at
INFO     sqlalchemy.engine.Engine:base.py:1843 [generated in 0.00043s (insertmanyvalues) 1/2 (ordered; batch not supported)] ('issuer_5694', 'issuer', None, None)
INFO     sqlalchemy.engine.Engine:base.py:1843 INSERT INTO users (discord_id, username, avatar_url, updated_at) VALUES (?, ?, ?, ?) RETURNING id, created_at
INFO     sqlalchemy.engine.Engine:base.py:1843 [insertmanyvalues 2/2 (ordered; batch not supported)] ('contractor_5694', 'contractor', None, None)
INFO     sqlalchemy.engine.Engine:base.py:2696 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2690 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1848 SELECT users.id, users.discord_id, users.username, users.avatar_url, users.created_at, users.updated_at
FROM users
WHERE users.id = ?
INFO     sqlalchemy.engine.Engine:base.py:1848 [generated in 0.00028s] (1,)
INFO     sqlalchemy.engine.Engine:base.py:1848 SELECT users.id, users.discord_id, users.username, users.avatar_url, users.created_at, users.updated_at
FROM users
WHERE users.id = ?
INFO     sqlalchemy.engine.Engine:base.py:1848 [cached since 0.004016s ago] (2,)
INFO     sqlalchemy.engine.Engine:base.py:1848 INSERT INTO items (name, description, tier, volume) VALUES (?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1848 [generated in 0.00037s] ('Test Cargo 5694', None, 1, 1.0)
INFO     sqlalchemy.engine.Engine:base.py:1843 INSERT INTO wallets (user_id, balance, updated_at) VALUES (?, ?, ?) RETURNING id
INFO     sqlalchemy.engine.Engine:base.py:1843 [generated in 0.00031s (insertmanyvalues) 1/2 (ordered; batch not supported)] (1, 10000.0, None)
INFO     sqlalchemy.engine.Engine:base.py:1843 INSERT INTO wallets (user_id, balance, updated_at) VALUES (?, ?, ?) RETURNING id
INFO     sqlalchemy.engine.Engine:base.py:1843 [insertmanyvalues 2/2 (ordered; batch not supported)] (2, 5000.0, None)
INFO     sqlalchemy.engine.Engine:base.py:2696 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2690 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1848 SELECT items.id, items.name, items.description, items.tier, items.volume
FROM items
WHERE items.id = ?
INFO     sqlalchemy.engine.Engine:base.py:1848 [generated in 0.00046s] (1,)
INFO     sqlalchemy.engine.Engine:base.py:1848 SELECT planets.id, planets.name, planets.x, planets.y, planets.slots, planets.temperature, planets.gravity, planets.owner_id, planets.created_at, planets.updated_at
FROM planets
 LIMIT ? OFFSET ?
INFO     sqlalchemy.engine.Engine:base.py:1848 [generated in 0.00046s] (2, 0)
INFO     sqlalchemy.engine.Engine:base.py:1848 SELECT users.id AS users_id, users.discord_id AS users_discord_id, users.username AS users_username, users.avatar_url AS users_avatar_url, users.created_at AS users_created_at, users.updated_at AS users_updated_at
FROM users
WHERE users.id = ?
INFO     sqlalchemy.engine.Engine:base.py:1848 [generated in 0.00037s] (2,)
INFO     sqlalchemy.engine.Engine:base.py:2693 ROLLBACK
--------------------------- Captured stdout teardown ---------------------------
2026-02-05 09:12:35,815 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-05 09:12:35,816 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("users")
2026-02-05 09:12:35,816 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-05 09:12:35,818 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("planets")
2026-02-05 09:12:35,819 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-05 09:12:35,820 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("items")
2026-02-05 09:12:35,821 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-05 09:12:35,822 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("inventories")
2026-02-05 09:12:35,822 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-05 09:12:35,824 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("wallets")
2026-02-05 09:12:35,824 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-05 09:12:35,826 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("buildings")
2026-02-05 09:12:35,826 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-05 09:12:35,828 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("fleets")
2026-02-05 09:12:35,828 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-05 09:12:35,829 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("contracts")
2026-02-05 09:12:35,830 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-05 09:12:35,832 INFO sqlalchemy.engine.Engine
DROP TABLE inventories
2026-02-05 09:12:35,832 INFO sqlalchemy.engine.Engine [no key 0.00032s] ()
2026-02-05 09:12:35,838 INFO sqlalchemy.engine.Engine
DROP TABLE contracts
2026-02-05 09:12:35,838 INFO sqlalchemy.engine.Engine [no key 0.00030s] ()
2026-02-05 09:12:35,843 INFO sqlalchemy.engine.Engine
DROP TABLE fleets
2026-02-05 09:12:35,843 INFO sqlalchemy.engine.Engine [no key 0.00021s] ()
2026-02-05 09:12:35,848 INFO sqlalchemy.engine.Engine
DROP TABLE buildings
2026-02-05 09:12:35,848 INFO sqlalchemy.engine.Engine [no key 0.00029s] ()
2026-02-05 09:12:35,852 INFO sqlalchemy.engine.Engine
DROP TABLE wallets
2026-02-05 09:12:35,852 INFO sqlalchemy.engine.Engine [no key 0.00030s] ()
2026-02-05 09:12:35,858 INFO sqlalchemy.engine.Engine
DROP TABLE planets
2026-02-05 09:12:35,858 INFO sqlalchemy.engine.Engine [no key 0.00025s] ()
2026-02-05 09:12:35,863 INFO sqlalchemy.engine.Engine
DROP TABLE items
2026-02-05 09:12:35,863 INFO sqlalchemy.engine.Engine [no key 0.00021s] ()
2026-02-05 09:12:35,868 INFO sqlalchemy.engine.Engine
DROP TABLE users
2026-02-05 09:12:35,868 INFO sqlalchemy.engine.Engine [no key 0.00015s] ()
2026-02-05 09:12:35,874 INFO sqlalchemy.engine.Engine COMMIT
---------------------------- Captured log teardown -----------------------------
INFO     sqlalchemy.engine.Engine:base.py:2690 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1848 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1848 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1848 PRAGMA main.table_info("planets")
INFO     sqlalchemy.engine.Engine:base.py:1848 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1848 PRAGMA main.table_info("items")
INFO     sqlalchemy.engine.Engine:base.py:1848 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1848 PRAGMA main.table_info("inventories")
INFO     sqlalchemy.engine.Engine:base.py:1848 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1848 PRAGMA main.table_info("wallets")
INFO     sqlalchemy.engine.Engine:base.py:1848 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1848 PRAGMA main.table_info("buildings")
INFO     sqlalchemy.engine.Engine:base.py:1848 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1848 PRAGMA main.table_info("fleets")
INFO     sqlalchemy.engine.Engine:base.py:1848 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1848 PRAGMA main.table_info("contracts")
INFO     sqlalchemy.engine.Engine:base.py:1848 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1848
DROP TABLE inventories
INFO     sqlalchemy.engine.Engine:base.py:1848 [no key 0.00032s] ()
INFO     sqlalchemy.engine.Engine:base.py:1848
DROP TABLE contracts
INFO     sqlalchemy.engine.Engine:base.py:1848 [no key 0.00030s] ()
INFO     sqlalchemy.engine.Engine:base.py:1848
DROP TABLE fleets
INFO     sqlalchemy.engine.Engine:base.py:1848 [no key 0.00021s] ()
INFO     sqlalchemy.engine.Engine:base.py:1848
DROP TABLE buildings
INFO     sqlalchemy.engine.Engine:base.py:1848 [no key 0.00029s] ()
INFO     sqlalchemy.engine.Engine:base.py:1848
DROP TABLE wallets
INFO     sqlalchemy.engine.Engine:base.py:1848 [no key 0.00030s] ()
INFO     sqlalchemy.engine.Engine:base.py:1848
DROP TABLE planets
INFO     sqlalchemy.engine.Engine:base.py:1848 [no key 0.00025s] ()
INFO     sqlalchemy.engine.Engine:base.py:1848
DROP TABLE items
INFO     sqlalchemy.engine.Engine:base.py:1848 [no key 0.00021s] ()
INFO     sqlalchemy.engine.Engine:base.py:1848
DROP TABLE users
INFO     sqlalchemy.engine.Engine:base.py:1848 [no key 0.00015s] ()
INFO     sqlalchemy.engine.Engine:base.py:2696 COMMIT
=============================== warnings summary ===============================
app/core/config.py:4
  /app/backend/app/core/config.py:4: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class Settings(BaseSettings):

app/schemas/planet.py:20
  /app/backend/app/schemas/planet.py:20: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class Planet(PlanetBase):

app/schemas/item.py:13
  /app/backend/app/schemas/item.py:13: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class Item(ItemBase):

app/schemas/inventory.py:14
  /app/backend/app/schemas/inventory.py:14: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class Inventory(InventoryBase):

app/schemas/fleet.py:15
  /app/backend/app/schemas/fleet.py:15: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class FleetResponse(FleetBase):

app/schemas/contract.py:16
  /app/backend/app/schemas/contract.py:16: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class ContractResponse(ContractBase):

app/schemas/building.py:11
  /app/backend/app/schemas/building.py:11: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class Building(BuildingBase):

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
=========================== short test summary info ============================
FAILED tests/test_contracts.py::test_contract_flow - sqlalchemy.exc.MissingGr...
======================== 1 failed, 7 warnings in 3.31s =========================
