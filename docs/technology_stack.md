# 技術スタック選定書

## 1. 全体アーキテクチャ

**構成**: クライアント・サーバー型（Webブラウザ + REST API / WebSocket）
**デプロイ**: Dockerコンテナによるマイクロサービス構成（将来的）

## 2. バックエンド (Backend)

計算重視のシミュレーションロジックと、リアルタイムな経済データの配信を担います。

| 役割 | 技術 | 選定理由 |
| --- | --- | --- |
| **言語** | **Python 3.12+** | ユーザー要望。経済計算ライブラリが豊富で、開発速度が速い。 |
| **フレームワーク** | **FastAPI** | 高速な非同期処理（ASGI）が可能で、WebSocketをネイティブサポートするため、リアルタイムゲームに最適。 |
| **データベース** | **MySQL 8.0+** | ユーザー要望。トランザクション処理（ACID）に強く、経済データの整合性確保に必須。 |
| **ORM** | **SQLAlchemy** (Async) | Pythonの標準的ORM。非同期対応しておりFastAPIと相性が良い。 |
| **非同期タスク** | **Celery** + **Redis** | 重い経済シミュレーション（全宇宙の価格更新など）や定期バッチ処理をバックグラウンドで処理するため。 |

## 3. フロントエンド (Frontend)

「ゲーム」というよりは「高機能な金融ダッシュボード」に近いUI/UXを目指します。

| 役割 | 技術 | 選定理由 |
| --- | --- | --- |
| **フレームワーク** | **React** | ダッシュボード系UIのコンポーネント資産が最も豊富。状態管理（Redux/Zustand）が強力。 |
| **ビルドツール** | **Vite** | 高速な開発体験。 |
| **言語** | **TypeScript** | 型安全性により、複雑な経済データの取り扱いミスを防ぐ。 |
| **UIライブラリ** | **Mantine** or **Chakra UI** | "Dashboard"構築に適した、美しく機能的なコンポーネントが揃っている。 |
| **API通信** | **TanStack Query** | サーバー状態のキャッシュ管理。リアルタイムな価格更新の管理に最適。 |

## 4. ビジュアライゼーション (Visuals)

「リアルな3D」ではなく、「視認性の高い星図」と「情報グラフ」を重視します。

| 役割 | 技術 | 選定理由 |
| --- | --- | --- |
| **星図・マップ** | **PixiJS** (React Pixi) | **2D WebGLレンダラー**。DOM操作（HTML）では数千の星や船を描画すると重くなるため、Canvas描画ができる軽量なPixiJSを採用。 |
| **チャート** | **Recharts** | React製の軽量チャートライブラリ。市場価格の推移グラフなどに使用。 |

## 5. インフラ・開発環境 (Infrastructure)

| 役割 | 技術 | 選定理由 |
| --- | --- | --- |
| **コンテナ** | **Docker / Docker Compose** | DB、Redis、APIサーバーを一括管理し、環境差異をなくす。 |

## 6. この構成のメリット

1.  **開発効率**: Python + React は知見が多く、ライブラリも充実しているため、コアとなる「経済ロジック」の実装に集中できます。
2.  **スケーラビリティ**: FastAPIは非同期処理に強く、将来的にアクセスが増えてもWebSocket接続を多数維持できます。
3.  **拡張性**: View層（React）とLogic層（Python）がAPIで疎結合なため、将来的にスマホアプリ化したり、別のフロントエンドを作ることも容易です。
